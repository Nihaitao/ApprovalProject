[2017-12-21 13:01:02,074][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.DomSqlMapBuilder][ParseGlobalProperties]-- Add property "useStatementNamespaces" value "false"
[2017-12-21 13:01:02,155][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [_getSystemTime] Prepared SQL: [select now();]
[2017-12-21 13:01:02,167][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [selectStationByAccessId] Prepared SQL: [select        h_station.*        from        h_station        where h_station.AccessKeyId= @param0         limit 1]
[2017-12-21 13:01:02,172][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTemplet] Prepared SQL: [SELECT        a.*,(SELECT `Name` from h_station_account where Account_ID=a.AddPersion) as AddPersonName        FROM        sp_approvaltype a        where a.System_Station_ID= @param0  and a.IsDelete=0 and a.Enditable=1        order by  a.Enditable desc]
[2017-12-21 13:01:02,174][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetSelectApproval] Prepared SQL: [SELECT a.*,t.`Name` as Title,s.`Name` as AddPersonName,c.ShowName,v.`Value`,c.FieldType from sp_approvallist a        LEFT join sp_approvaltype t on a.ApprovalType_ID=t.ID        LEFT JOIN h_station_account s on a.AddPerson=s.Account_ID        LEFT JOIN h_customfield c on a.ApprovalType_ID=SUBSTRING(c.BusType,10)        LEFT JOIN h_customfield_value v on c.FieldName=v.FieldName        where a.ID= @param0]
[2017-12-21 13:01:02,178][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalField] Prepared SQL: [SELECT ID,Name,DataSource,FieldType from h_customfield  where BusType= @param0  and FieldType in(103,104,105,106,110) and PID=0 and System_Station_ID= @param1]
[2017-12-21 13:01:02,178][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetAllAcoount] Prepared SQL: [SELECT        t.Account_ID,        t.System_Station_ID,        t.`Name`,        s.Phone,        s.CardNumber,        t.AddTime,        t.Valid,        t.IsAdministrator,        t.Stationproxy_ID,        z.LoginTime,        z.LoginCount,        y.Departments        FROM        h_station_account AS t        LEFT JOIN        (SELECT Account_ID,MAX(LoginTime) LoginTime,COUNT(Account_ID) LoginCount        FROM h_station_account_logindetail GROUP BY Account_ID ORDER BY Account_ID ASC  ) z ON t.Account_ID=z.Account_ID        LEFT JOIN (        SELECT        n.Account_ID,        GROUP_CONCAT(n.Department_ID, ':', n.IsManager) AS Departments        FROM        (SELECT Account_ID,Department_ID,IsMain,IsManager FROM h_station_account_department ORDER BY IsMain desc) n        GROUP BY n.Account_ID        ) y ON t.Account_ID=y.Account_ID        LEFT JOIN h_account s ON t.AccountID=s.ID        WHERE 1=1  AND t.IsDelete=0 and t.System_Station_ID= @param0]
[2017-12-21 13:01:02,179][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetInitiateApplicationList] Prepared SQL: [SELECT * FROM sp_approvaltype        WHERE ID IN (        SELECT ApprovalType_ID FROM sp_approvalvisrange WHERE AccID =  @param0         OR FIND_IN_SET(DeptID,(SELECT group_concat(getParentList (Department_ID)) FROM h_station_account_department WHERE Account_ID =  @param0  AND System_Station_ID =  @param1 ))        )        AND System_Station_ID =  @param1  AND IsDelete = 0 AND Enditable = 1]
[2017-12-21 13:01:02,179][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCustomfield] Prepared SQL: [SELECT * from h_customfield where BusType= @param0  and IsDelete=0 order by SortID]
[2017-12-21 13:01:02,180][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCondition] Prepared SQL: [SELECT *,AccIds as AccId,DeptIds as DeptId from sp_approvalcondition where ApprovalType_ID= @param0  order by Priority]
[2017-12-21 13:01:02,183][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetDepartment] Prepared SQL: [select a.*,b.Name as AccountName from h_station_account_department a left join h_station_account b on b.Account_ID = a.Account_ID where a.System_Station_ID =  @param0 ;]
[2017-12-21 13:01:02,185][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionObject] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_conditionapproveobject a left join h_station_account b on b.Account_ID = a.AccId order by a.ApprovalCondition_ID,a.Priority]
[2017-12-21 13:01:02,185][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionCC] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_approvalcc a left join h_station_account b on b.Account_ID = a.AccId]
[2017-12-21 13:01:02,185][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetUpDeparts] Prepared SQL: [select getParentList(Department_ID) FROM h_station_account_department where Account_ID =  @param0  and IsMain = 1 and System_Station_ID =  @param1 ;]
[2017-12-21 13:01:02,186][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalInfoModel] Prepared SQL: [SELECT  a.ApprovalType_ID as ID, concat(s.`Name`,'的',t.`Name`) as Title,ApprovalStatus        FROM sp_approvallist a        LEFT JOIN sp_approvaltype t ON a.ApprovalType_ID = t.ID        LEFT JOIN h_station_account s ON a.AddPerson = s.Account_ID        WHERE a.ID = @param0]
[2017-12-21 13:01:02,187][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalFieldList] Prepared SQL: [SELECT a.ID FieldID,a.PID,a.`Name` ShowName,b.`Value` ShowValue  from h_customfield a        join h_customfield_value b on a.FieldName = b.FieldName        where a.BusType = concat('approval_', @param0 ) and b.BusType = 100 and b.BusID =  @param1         order by a.SortID]
[2017-12-21 13:01:02,188][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalProcessList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvalprocess a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0         Order by Deepth;]
[2017-12-21 13:01:02,188][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTransferListList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvaltransfer a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0 ;]
[2017-12-21 13:01:02,189][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalprocessModel] Prepared SQL: [SELECT a.ID,a.ApprovalList_ID,a.CounterSign,a.Deepth,a.ApprovalTransfer_ID,        (case when b.AccID > 0 then b.AccID else a.AccID end) as AccID,        (case when b.AccID > 0 then b.Remark else a.Remark end) as Remark,        (case when b.AccID > 0 then b.operationTime else a.operationTime end) as operationTime,        (case when b.AccID > 0 then b.operationStatus else a.operationStatus end) as operationStatus        from sp_approvalprocess a        left join sp_approvaltransfer b on a.approvalTransfer_ID = b.ID        where a.approvallist_id= @param0  and a.Deepth= @param1]
[2017-12-21 13:01:02,190][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovaltransferModel] Prepared SQL: [SELECT * from Sp_Approvaltransfer where approvallist_id= @param0]
[2017-12-21 13:01:02,190][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetProcessTransferModel] Prepared SQL: [SELECT a.AccID,b.AccID AccID1 from sp_approvalprocess a left join  sp_approvaltransfer b on a.ApprovalTransfer_ID = b.ID        where a.ApprovalList_ID =  @param0  and a.Deepth =  @param1]
[2017-12-21 13:01:02,191][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [EnditableApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set Enditable =  @param0  where ID =  @param1 ;]
[2017-12-21 13:01:02,192][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [DeleteApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set IsDelete = 1 where ID =  @param0 ;]
[2017-12-21 13:01:36,819][thdId:9]-[DEBUG]-[CommonFramework.Mvc.RequestVerification][Initialization]-- 签名参数为空
[2017-12-21 13:01:36,876][thdId:9]-[ERROR]-[CommonFramework.Mvc.Filter.ExceptionFilter][ExecuteExceptionFilterAsync]-- 系统异常：
System.ArgumentNullException: 值不能为 null。
参数名: 签名参数为空
   在 CommonFramework.Mvc.RequestVerification.Initialization()
   在 CommonFramework.Mvc.RequestVerification.CheckTimeOut(Int32 millisecond)
   在 CT.Common.Mvc.Filter.StationAuthorizeFilter.AuthenticateAsync(HttpAuthenticationContext context, CancellationToken cancellationToken)
   在 System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ExceptionFilterResult.<ExecuteAsync>d__0.MoveNext()
[2017-12-21 13:01:51,412][thdId:10]-[DEBUG]-[CommonFramework.Mvc.RequestVerification][Initialization]-- 签名参数为空
[2017-12-21 13:01:51,449][thdId:10]-[ERROR]-[CommonFramework.Mvc.Filter.ExceptionFilter][ExecuteExceptionFilterAsync]-- 系统异常：
System.ArgumentNullException: 值不能为 null。
参数名: 签名参数为空
   在 CommonFramework.Mvc.RequestVerification.Initialization()
   在 CommonFramework.Mvc.RequestVerification.CheckTimeOut(Int32 millisecond)
   在 CT.Common.Mvc.Filter.StationAuthorizeFilter.AuthenticateAsync(HttpAuthenticationContext context, CancellationToken cancellationToken)
   在 System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ExceptionFilterResult.<ExecuteAsync>d__0.MoveNext()
[2017-12-21 13:02:11,677][thdId:10]-[DEBUG]-[CommonFramework.Mvc.RequestVerification][Initialization]-- 签名参数为空
[2017-12-21 13:02:11,710][thdId:10]-[ERROR]-[CommonFramework.Mvc.Filter.ExceptionFilter][ExecuteExceptionFilterAsync]-- 系统异常：
System.ArgumentNullException: 值不能为 null。
参数名: 签名参数为空
   在 CommonFramework.Mvc.RequestVerification.Initialization()
   在 CommonFramework.Mvc.RequestVerification.CheckTimeOut(Int32 millisecond)
   在 CT.Common.Mvc.Filter.StationAuthorizeFilter.AuthenticateAsync(HttpAuthenticationContext context, CancellationToken cancellationToken)
   在 System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ExceptionFilterResult.<ExecuteAsync>d__0.MoveNext()
[2017-12-21 13:02:22,234][thdId:12]-[DEBUG]-[CommonFramework.Mvc.RequestVerification][Initialization]-- 签名参数为空
[2017-12-21 13:02:22,281][thdId:12]-[ERROR]-[CommonFramework.Mvc.Filter.ExceptionFilter][ExecuteExceptionFilterAsync]-- 系统异常：
System.ArgumentNullException: 值不能为 null。
参数名: 签名参数为空
   在 CommonFramework.Mvc.RequestVerification.Initialization()
   在 CommonFramework.Mvc.RequestVerification.CheckTimeOut(Int32 millisecond)
   在 CT.Common.Mvc.Filter.StationAuthorizeFilter.AuthenticateAsync(HttpAuthenticationContext context, CancellationToken cancellationToken)
   在 System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ExceptionFilterResult.<ExecuteAsync>d__0.MoveNext()
[2017-12-21 13:03:09,967][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.DomSqlMapBuilder][ParseGlobalProperties]-- Add property "useStatementNamespaces" value "false"
[2017-12-21 13:03:10,044][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [_getSystemTime] Prepared SQL: [select now();]
[2017-12-21 13:03:10,055][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [selectStationByAccessId] Prepared SQL: [select        h_station.*        from        h_station        where h_station.AccessKeyId= @param0         limit 1]
[2017-12-21 13:03:10,061][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTemplet] Prepared SQL: [SELECT        a.*,(SELECT `Name` from h_station_account where Account_ID=a.AddPersion) as AddPersonName        FROM        sp_approvaltype a        where a.System_Station_ID= @param0  and a.IsDelete=0 and a.Enditable=1        order by  a.Enditable desc]
[2017-12-21 13:03:10,061][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetSelectApproval] Prepared SQL: [SELECT a.*,t.`Name` as Title,s.`Name` as AddPersonName,c.ShowName,v.`Value`,c.FieldType from sp_approvallist a        LEFT join sp_approvaltype t on a.ApprovalType_ID=t.ID        LEFT JOIN h_station_account s on a.AddPerson=s.Account_ID        LEFT JOIN h_customfield c on a.ApprovalType_ID=SUBSTRING(c.BusType,10)        LEFT JOIN h_customfield_value v on c.FieldName=v.FieldName        where a.ID= @param0]
[2017-12-21 13:03:10,065][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalField] Prepared SQL: [SELECT ID,Name,DataSource,FieldType from h_customfield  where BusType= @param0  and FieldType in(103,104,105,106,110) and PID=0 and System_Station_ID= @param1]
[2017-12-21 13:03:10,066][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetAllAcoount] Prepared SQL: [SELECT        t.Account_ID,        t.System_Station_ID,        t.`Name`,        s.Phone,        s.CardNumber,        t.AddTime,        t.Valid,        t.IsAdministrator,        t.Stationproxy_ID,        z.LoginTime,        z.LoginCount,        y.Departments        FROM        h_station_account AS t        LEFT JOIN        (SELECT Account_ID,MAX(LoginTime) LoginTime,COUNT(Account_ID) LoginCount        FROM h_station_account_logindetail GROUP BY Account_ID ORDER BY Account_ID ASC  ) z ON t.Account_ID=z.Account_ID        LEFT JOIN (        SELECT        n.Account_ID,        GROUP_CONCAT(n.Department_ID, ':', n.IsManager) AS Departments        FROM        (SELECT Account_ID,Department_ID,IsMain,IsManager FROM h_station_account_department ORDER BY IsMain desc) n        GROUP BY n.Account_ID        ) y ON t.Account_ID=y.Account_ID        LEFT JOIN h_account s ON t.AccountID=s.ID        WHERE 1=1  AND t.IsDelete=0 and t.System_Station_ID= @param0]
[2017-12-21 13:03:10,066][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetInitiateApplicationList] Prepared SQL: [SELECT * FROM sp_approvaltype        WHERE ID IN (        SELECT ApprovalType_ID FROM sp_approvalvisrange WHERE AccID =  @param0         OR FIND_IN_SET(DeptID,(SELECT group_concat(getParentList (Department_ID)) FROM h_station_account_department WHERE Account_ID =  @param0  AND System_Station_ID =  @param1 ))        )        AND System_Station_ID =  @param1  AND IsDelete = 0 AND Enditable = 1]
[2017-12-21 13:03:10,067][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCustomfield] Prepared SQL: [SELECT * from h_customfield where BusType= @param0  and IsDelete=0 order by SortID]
[2017-12-21 13:03:10,067][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCondition] Prepared SQL: [SELECT *,AccIds as AccId,DeptIds as DeptId from sp_approvalcondition where ApprovalType_ID= @param0  order by Priority]
[2017-12-21 13:03:10,067][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetDepartment] Prepared SQL: [select a.*,b.Name as AccountName from h_station_account_department a left join h_station_account b on b.Account_ID = a.Account_ID where a.System_Station_ID =  @param0 ;]
[2017-12-21 13:03:10,068][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionObject] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_conditionapproveobject a left join h_station_account b on b.Account_ID = a.AccId order by a.ApprovalCondition_ID,a.Priority]
[2017-12-21 13:03:10,068][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionCC] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_approvalcc a left join h_station_account b on b.Account_ID = a.AccId]
[2017-12-21 13:03:10,068][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetUpDeparts] Prepared SQL: [select getParentList(Department_ID) FROM h_station_account_department where Account_ID =  @param0  and IsMain = 1 and System_Station_ID =  @param1 ;]
[2017-12-21 13:03:10,069][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalInfoModel] Prepared SQL: [SELECT  a.ApprovalType_ID as ID, concat(s.`Name`,'的',t.`Name`) as Title,ApprovalStatus        FROM sp_approvallist a        LEFT JOIN sp_approvaltype t ON a.ApprovalType_ID = t.ID        LEFT JOIN h_station_account s ON a.AddPerson = s.Account_ID        WHERE a.ID = @param0]
[2017-12-21 13:03:10,069][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalFieldList] Prepared SQL: [SELECT a.ID FieldID,a.PID,a.`Name` ShowName,b.`Value` ShowValue  from h_customfield a        join h_customfield_value b on a.FieldName = b.FieldName        where a.BusType = concat('approval_', @param0 ) and b.BusType = 100 and b.BusID =  @param1         order by a.SortID]
[2017-12-21 13:03:10,070][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalProcessList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvalprocess a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0         Order by Deepth;]
[2017-12-21 13:03:10,070][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTransferListList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvaltransfer a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0 ;]
[2017-12-21 13:03:10,071][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalprocessModel] Prepared SQL: [SELECT a.ID,a.ApprovalList_ID,a.CounterSign,a.Deepth,a.ApprovalTransfer_ID,        (case when b.AccID > 0 then b.AccID else a.AccID end) as AccID,        (case when b.AccID > 0 then b.Remark else a.Remark end) as Remark,        (case when b.AccID > 0 then b.operationTime else a.operationTime end) as operationTime,        (case when b.AccID > 0 then b.operationStatus else a.operationStatus end) as operationStatus        from sp_approvalprocess a        left join sp_approvaltransfer b on a.approvalTransfer_ID = b.ID        where a.approvallist_id= @param0  and a.Deepth= @param1]
[2017-12-21 13:03:10,071][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovaltransferModel] Prepared SQL: [SELECT * from Sp_Approvaltransfer where approvallist_id= @param0]
[2017-12-21 13:03:10,071][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetProcessTransferModel] Prepared SQL: [SELECT a.AccID,b.AccID AccID1 from sp_approvalprocess a left join  sp_approvaltransfer b on a.ApprovalTransfer_ID = b.ID        where a.ApprovalList_ID =  @param0  and a.Deepth =  @param1]
[2017-12-21 13:03:10,072][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [EnditableApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set Enditable =  @param0  where ID =  @param1 ;]
[2017-12-21 13:03:10,072][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [DeleteApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set IsDelete = 1 where ID =  @param0 ;]
[2017-12-21 13:03:11,460][thdId:7]-[DEBUG]-[CommonFramework.Mvc.RequestVerification][Initialization]-- 签名参数为空
[2017-12-21 13:03:11,508][thdId:7]-[ERROR]-[CommonFramework.Mvc.Filter.ExceptionFilter][ExecuteExceptionFilterAsync]-- 系统异常：
System.ArgumentNullException: 值不能为 null。
参数名: 签名参数为空
   在 CommonFramework.Mvc.RequestVerification.Initialization()
   在 CommonFramework.Mvc.RequestVerification.CheckTimeOut(Int32 millisecond)
   在 CT.Common.Mvc.Filter.StationAuthorizeFilter.AuthenticateAsync(HttpAuthenticationContext context, CancellationToken cancellationToken)
   在 System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ExceptionFilterResult.<ExecuteAsync>d__0.MoveNext()
[2017-12-21 13:03:18,288][thdId:6]-[DEBUG]-[CommonFramework.Mvc.RequestVerification][Initialization]-- 签名参数为空
[2017-12-21 13:03:18,324][thdId:6]-[ERROR]-[CommonFramework.Mvc.Filter.ExceptionFilter][ExecuteExceptionFilterAsync]-- 系统异常：
System.ArgumentNullException: 值不能为 null。
参数名: 签名参数为空
   在 CommonFramework.Mvc.RequestVerification.Initialization()
   在 CommonFramework.Mvc.RequestVerification.CheckTimeOut(Int32 millisecond)
   在 CT.Common.Mvc.Filter.StationAuthorizeFilter.AuthenticateAsync(HttpAuthenticationContext context, CancellationToken cancellationToken)
   在 System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ExceptionFilterResult.<ExecuteAsync>d__0.MoveNext()
[2017-12-21 13:03:51,790][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.DomSqlMapBuilder][ParseGlobalProperties]-- Add property "useStatementNamespaces" value "false"
[2017-12-21 13:03:51,865][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [_getSystemTime] Prepared SQL: [select now();]
[2017-12-21 13:03:51,877][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [selectStationByAccessId] Prepared SQL: [select        h_station.*        from        h_station        where h_station.AccessKeyId= @param0         limit 1]
[2017-12-21 13:03:51,882][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTemplet] Prepared SQL: [SELECT        a.*,(SELECT `Name` from h_station_account where Account_ID=a.AddPersion) as AddPersonName        FROM        sp_approvaltype a        where a.System_Station_ID= @param0  and a.IsDelete=0 and a.Enditable=1        order by  a.Enditable desc]
[2017-12-21 13:03:51,883][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetSelectApproval] Prepared SQL: [SELECT a.*,t.`Name` as Title,s.`Name` as AddPersonName,c.ShowName,v.`Value`,c.FieldType from sp_approvallist a        LEFT join sp_approvaltype t on a.ApprovalType_ID=t.ID        LEFT JOIN h_station_account s on a.AddPerson=s.Account_ID        LEFT JOIN h_customfield c on a.ApprovalType_ID=SUBSTRING(c.BusType,10)        LEFT JOIN h_customfield_value v on c.FieldName=v.FieldName        where a.ID= @param0]
[2017-12-21 13:03:51,887][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalField] Prepared SQL: [SELECT ID,Name,DataSource,FieldType from h_customfield  where BusType= @param0  and FieldType in(103,104,105,106,110) and PID=0 and System_Station_ID= @param1]
[2017-12-21 13:03:51,888][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetAllAcoount] Prepared SQL: [SELECT        t.Account_ID,        t.System_Station_ID,        t.`Name`,        s.Phone,        s.CardNumber,        t.AddTime,        t.Valid,        t.IsAdministrator,        t.Stationproxy_ID,        z.LoginTime,        z.LoginCount,        y.Departments        FROM        h_station_account AS t        LEFT JOIN        (SELECT Account_ID,MAX(LoginTime) LoginTime,COUNT(Account_ID) LoginCount        FROM h_station_account_logindetail GROUP BY Account_ID ORDER BY Account_ID ASC  ) z ON t.Account_ID=z.Account_ID        LEFT JOIN (        SELECT        n.Account_ID,        GROUP_CONCAT(n.Department_ID, ':', n.IsManager) AS Departments        FROM        (SELECT Account_ID,Department_ID,IsMain,IsManager FROM h_station_account_department ORDER BY IsMain desc) n        GROUP BY n.Account_ID        ) y ON t.Account_ID=y.Account_ID        LEFT JOIN h_account s ON t.AccountID=s.ID        WHERE 1=1  AND t.IsDelete=0 and t.System_Station_ID= @param0]
[2017-12-21 13:03:51,889][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetInitiateApplicationList] Prepared SQL: [SELECT * FROM sp_approvaltype        WHERE ID IN (        SELECT ApprovalType_ID FROM sp_approvalvisrange WHERE AccID =  @param0         OR FIND_IN_SET(DeptID,(SELECT group_concat(getParentList (Department_ID)) FROM h_station_account_department WHERE Account_ID =  @param0  AND System_Station_ID =  @param1 ))        )        AND System_Station_ID =  @param1  AND IsDelete = 0 AND Enditable = 1]
[2017-12-21 13:03:51,889][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCustomfield] Prepared SQL: [SELECT * from h_customfield where BusType= @param0  and IsDelete=0 order by SortID]
[2017-12-21 13:03:51,890][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCondition] Prepared SQL: [SELECT *,AccIds as AccId,DeptIds as DeptId from sp_approvalcondition where ApprovalType_ID= @param0  order by Priority]
[2017-12-21 13:03:51,890][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetDepartment] Prepared SQL: [select a.*,b.Name as AccountName from h_station_account_department a left join h_station_account b on b.Account_ID = a.Account_ID where a.System_Station_ID =  @param0 ;]
[2017-12-21 13:03:51,890][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionObject] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_conditionapproveobject a left join h_station_account b on b.Account_ID = a.AccId order by a.ApprovalCondition_ID,a.Priority]
[2017-12-21 13:03:51,891][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionCC] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_approvalcc a left join h_station_account b on b.Account_ID = a.AccId]
[2017-12-21 13:03:51,891][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetUpDeparts] Prepared SQL: [select getParentList(Department_ID) FROM h_station_account_department where Account_ID =  @param0  and IsMain = 1 and System_Station_ID =  @param1 ;]
[2017-12-21 13:03:51,891][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalInfoModel] Prepared SQL: [SELECT  a.ApprovalType_ID as ID, concat(s.`Name`,'的',t.`Name`) as Title,ApprovalStatus        FROM sp_approvallist a        LEFT JOIN sp_approvaltype t ON a.ApprovalType_ID = t.ID        LEFT JOIN h_station_account s ON a.AddPerson = s.Account_ID        WHERE a.ID = @param0]
[2017-12-21 13:03:51,892][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalFieldList] Prepared SQL: [SELECT a.ID FieldID,a.PID,a.`Name` ShowName,b.`Value` ShowValue  from h_customfield a        join h_customfield_value b on a.FieldName = b.FieldName        where a.BusType = concat('approval_', @param0 ) and b.BusType = 100 and b.BusID =  @param1         order by a.SortID]
[2017-12-21 13:03:51,892][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalProcessList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvalprocess a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0         Order by Deepth;]
[2017-12-21 13:03:51,893][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTransferListList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvaltransfer a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0 ;]
[2017-12-21 13:03:51,893][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalprocessModel] Prepared SQL: [SELECT a.ID,a.ApprovalList_ID,a.CounterSign,a.Deepth,a.ApprovalTransfer_ID,        (case when b.AccID > 0 then b.AccID else a.AccID end) as AccID,        (case when b.AccID > 0 then b.Remark else a.Remark end) as Remark,        (case when b.AccID > 0 then b.operationTime else a.operationTime end) as operationTime,        (case when b.AccID > 0 then b.operationStatus else a.operationStatus end) as operationStatus        from sp_approvalprocess a        left join sp_approvaltransfer b on a.approvalTransfer_ID = b.ID        where a.approvallist_id= @param0  and a.Deepth= @param1]
[2017-12-21 13:03:51,893][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovaltransferModel] Prepared SQL: [SELECT * from Sp_Approvaltransfer where approvallist_id= @param0]
[2017-12-21 13:03:51,894][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetProcessTransferModel] Prepared SQL: [SELECT a.AccID,b.AccID AccID1 from sp_approvalprocess a left join  sp_approvaltransfer b on a.ApprovalTransfer_ID = b.ID        where a.ApprovalList_ID =  @param0  and a.Deepth =  @param1]
[2017-12-21 13:03:51,895][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [EnditableApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set Enditable =  @param0  where ID =  @param1 ;]
[2017-12-21 13:03:51,895][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [DeleteApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set IsDelete = 1 where ID =  @param0 ;]
[2017-12-21 13:03:52,458][thdId:7]-[DEBUG]-[CommonFramework.Mvc.RequestVerification][Initialization]-- 签名参数为空
[2017-12-21 13:04:56,249][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.DomSqlMapBuilder][ParseGlobalProperties]-- Add property "useStatementNamespaces" value "false"
[2017-12-21 13:04:56,323][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [_getSystemTime] Prepared SQL: [select now();]
[2017-12-21 13:04:56,335][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [selectStationByAccessId] Prepared SQL: [select        h_station.*        from        h_station        where h_station.AccessKeyId= @param0         limit 1]
[2017-12-21 13:04:56,341][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTemplet] Prepared SQL: [SELECT        a.*,(SELECT `Name` from h_station_account where Account_ID=a.AddPersion) as AddPersonName        FROM        sp_approvaltype a        where a.System_Station_ID= @param0  and a.IsDelete=0 and a.Enditable=1        order by  a.Enditable desc]
[2017-12-21 13:04:56,341][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetSelectApproval] Prepared SQL: [SELECT a.*,t.`Name` as Title,s.`Name` as AddPersonName,c.ShowName,v.`Value`,c.FieldType from sp_approvallist a        LEFT join sp_approvaltype t on a.ApprovalType_ID=t.ID        LEFT JOIN h_station_account s on a.AddPerson=s.Account_ID        LEFT JOIN h_customfield c on a.ApprovalType_ID=SUBSTRING(c.BusType,10)        LEFT JOIN h_customfield_value v on c.FieldName=v.FieldName        where a.ID= @param0]
[2017-12-21 13:04:56,344][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalField] Prepared SQL: [SELECT ID,Name,DataSource,FieldType from h_customfield  where BusType= @param0  and FieldType in(103,104,105,106,110) and PID=0 and System_Station_ID= @param1]
[2017-12-21 13:04:56,345][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetAllAcoount] Prepared SQL: [SELECT        t.Account_ID,        t.System_Station_ID,        t.`Name`,        s.Phone,        s.CardNumber,        t.AddTime,        t.Valid,        t.IsAdministrator,        t.Stationproxy_ID,        z.LoginTime,        z.LoginCount,        y.Departments        FROM        h_station_account AS t        LEFT JOIN        (SELECT Account_ID,MAX(LoginTime) LoginTime,COUNT(Account_ID) LoginCount        FROM h_station_account_logindetail GROUP BY Account_ID ORDER BY Account_ID ASC  ) z ON t.Account_ID=z.Account_ID        LEFT JOIN (        SELECT        n.Account_ID,        GROUP_CONCAT(n.Department_ID, ':', n.IsManager) AS Departments        FROM        (SELECT Account_ID,Department_ID,IsMain,IsManager FROM h_station_account_department ORDER BY IsMain desc) n        GROUP BY n.Account_ID        ) y ON t.Account_ID=y.Account_ID        LEFT JOIN h_account s ON t.AccountID=s.ID        WHERE 1=1  AND t.IsDelete=0 and t.System_Station_ID= @param0]
[2017-12-21 13:04:56,346][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetInitiateApplicationList] Prepared SQL: [SELECT * FROM sp_approvaltype        WHERE ID IN (        SELECT ApprovalType_ID FROM sp_approvalvisrange WHERE AccID =  @param0         OR FIND_IN_SET(DeptID,(SELECT group_concat(getParentList (Department_ID)) FROM h_station_account_department WHERE Account_ID =  @param0  AND System_Station_ID =  @param1 ))        )        AND System_Station_ID =  @param1  AND IsDelete = 0 AND Enditable = 1]
[2017-12-21 13:04:56,347][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCustomfield] Prepared SQL: [SELECT * from h_customfield where BusType= @param0  and IsDelete=0 order by SortID]
[2017-12-21 13:04:56,347][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCondition] Prepared SQL: [SELECT *,AccIds as AccId,DeptIds as DeptId from sp_approvalcondition where ApprovalType_ID= @param0  order by Priority]
[2017-12-21 13:04:56,348][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetDepartment] Prepared SQL: [select a.*,b.Name as AccountName from h_station_account_department a left join h_station_account b on b.Account_ID = a.Account_ID where a.System_Station_ID =  @param0 ;]
[2017-12-21 13:04:56,348][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionObject] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_conditionapproveobject a left join h_station_account b on b.Account_ID = a.AccId order by a.ApprovalCondition_ID,a.Priority]
[2017-12-21 13:04:56,349][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionCC] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_approvalcc a left join h_station_account b on b.Account_ID = a.AccId]
[2017-12-21 13:04:56,349][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetUpDeparts] Prepared SQL: [select getParentList(Department_ID) FROM h_station_account_department where Account_ID =  @param0  and IsMain = 1 and System_Station_ID =  @param1 ;]
[2017-12-21 13:04:56,349][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalInfoModel] Prepared SQL: [SELECT  a.ApprovalType_ID as ID, concat(s.`Name`,'的',t.`Name`) as Title,ApprovalStatus        FROM sp_approvallist a        LEFT JOIN sp_approvaltype t ON a.ApprovalType_ID = t.ID        LEFT JOIN h_station_account s ON a.AddPerson = s.Account_ID        WHERE a.ID = @param0]
[2017-12-21 13:04:56,350][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalFieldList] Prepared SQL: [SELECT a.ID FieldID,a.PID,a.`Name` ShowName,b.`Value` ShowValue  from h_customfield a        join h_customfield_value b on a.FieldName = b.FieldName        where a.BusType = concat('approval_', @param0 ) and b.BusType = 100 and b.BusID =  @param1         order by a.SortID]
[2017-12-21 13:04:56,350][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalProcessList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvalprocess a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0         Order by Deepth;]
[2017-12-21 13:04:56,351][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTransferListList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvaltransfer a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0 ;]
[2017-12-21 13:04:56,351][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalprocessModel] Prepared SQL: [SELECT a.ID,a.ApprovalList_ID,a.CounterSign,a.Deepth,a.ApprovalTransfer_ID,        (case when b.AccID > 0 then b.AccID else a.AccID end) as AccID,        (case when b.AccID > 0 then b.Remark else a.Remark end) as Remark,        (case when b.AccID > 0 then b.operationTime else a.operationTime end) as operationTime,        (case when b.AccID > 0 then b.operationStatus else a.operationStatus end) as operationStatus        from sp_approvalprocess a        left join sp_approvaltransfer b on a.approvalTransfer_ID = b.ID        where a.approvallist_id= @param0  and a.Deepth= @param1]
[2017-12-21 13:04:56,351][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovaltransferModel] Prepared SQL: [SELECT * from Sp_Approvaltransfer where approvallist_id= @param0]
[2017-12-21 13:04:56,352][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetProcessTransferModel] Prepared SQL: [SELECT a.AccID,b.AccID AccID1 from sp_approvalprocess a left join  sp_approvaltransfer b on a.ApprovalTransfer_ID = b.ID        where a.ApprovalList_ID =  @param0  and a.Deepth =  @param1]
[2017-12-21 13:04:56,353][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [EnditableApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set Enditable =  @param0  where ID =  @param1 ;]
[2017-12-21 13:04:56,353][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [DeleteApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set IsDelete = 1 where ID =  @param0 ;]
[2017-12-21 13:05:02,301][thdId:8]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuting]-- url=http://localhost:63795/Process/GetSelectApproval?ApprovalListID=36
[2017-12-21 13:05:02,306][thdId:8]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuting]-- [ApprovalListID=36]
[2017-12-21 13:05:04,983][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalInfoModel] PreparedStatement : [SELECT  a.ApprovalType_ID as ID, concat(s.`Name`,'的',t.`Name`) as Title,ApprovalStatus        FROM sp_approvallist a        LEFT JOIN sp_approvaltype t ON a.ApprovalType_ID = t.ID        LEFT JOIN h_station_account s ON a.AddPerson = s.Account_ID        WHERE a.ID = @param0]
[2017-12-21 13:05:04,999][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalInfoModel] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:05:05,000][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalInfoModel] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:05:05,385][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "42331983" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:05,440][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "42331983" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:07,091][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalFieldList] PreparedStatement : [SELECT a.ID FieldID,a.PID,a.`Name` ShowName,b.`Value` ShowValue  from h_customfield a        join h_customfield_value b on a.FieldName = b.FieldName        where a.BusType = concat('approval_', @param0 ) and b.BusType = 100 and b.BusID =  @param1         order by a.SortID]
[2017-12-21 13:05:07,092][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalFieldList] Parameters: [@param0=[ID,74], @param1=[ApprovalListID,36]]
[2017-12-21 13:05:07,093][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalFieldList] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32]]
[2017-12-21 13:05:07,148][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "46630754" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:07,177][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "46630754" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:15,680][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalProcessList] PreparedStatement : [select a.*,b.`Name` AccName from sp_approvalprocess a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0         Order by Deepth;]
[2017-12-21 13:05:15,681][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalProcessList] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:05:15,682][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalProcessList] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:05:15,734][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "16973140" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:15,798][thdId:8]-[ERROR]-[IBatisNet.DataMapper.MappedStatements.ReaderAutoMapper][Build]-- The column [ApprovalList_ID] could not be auto mapped to a property on [ApprovalProject.Model.ViewModel.ApprovalProcessModel]
[2017-12-21 13:05:15,801][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "16973140" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:15,802][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalTransferListList] PreparedStatement : [select a.*,b.`Name` AccName from sp_approvaltransfer a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0 ;]
[2017-12-21 13:05:15,802][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalTransferListList] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:05:15,803][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalTransferListList] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:05:15,855][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "24026409" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:15,883][thdId:8]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "24026409" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:40,910][thdId:8]-[ERROR]-[CommonFramework.Mvc.Filter.ExceptionFilter][ExecuteExceptionFilterAsync]-- 系统异常：
System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 ApprovalProject.Business.ApprovallistMapper.GetSelectApproval(Int32 ApprovalListID) 位置 d:\公司项目-审批\trunk\ApprovalProject.Business\Process\ApprovallistMapper.cs:行号 240
   在 ApprovalProject.Web.Controller.ProcessController.GetSelectApproval(Int32 ApprovalListID) 位置 d:\公司项目-审批\trunk\ApprovalProject.Web\Controller\ProcessController.cs:行号 142
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   在 System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext()
--- 引发异常的上一位置中堆栈跟踪的末尾 ---
   在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   在 System.Web.Http.Controllers.ExceptionFilterResult.<ExecuteAsync>d__0.MoveNext()
[2017-12-21 13:05:43,388][thdId:11]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuting]-- url=http://localhost:63795/Process/GetSelectApproval?ApprovalListID=36
[2017-12-21 13:05:43,388][thdId:11]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuting]-- [ApprovalListID=36]
[2017-12-21 13:05:44,800][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalInfoModel] PreparedStatement : [SELECT  a.ApprovalType_ID as ID, concat(s.`Name`,'的',t.`Name`) as Title,ApprovalStatus        FROM sp_approvallist a        LEFT JOIN sp_approvaltype t ON a.ApprovalType_ID = t.ID        LEFT JOIN h_station_account s ON a.AddPerson = s.Account_ID        WHERE a.ID = @param0]
[2017-12-21 13:05:44,801][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalInfoModel] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:05:44,802][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalInfoModel] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:05:44,856][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "7995840" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:44,884][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "7995840" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:44,885][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalFieldList] PreparedStatement : [SELECT a.ID FieldID,a.PID,a.`Name` ShowName,b.`Value` ShowValue  from h_customfield a        join h_customfield_value b on a.FieldName = b.FieldName        where a.BusType = concat('approval_', @param0 ) and b.BusType = 100 and b.BusID =  @param1         order by a.SortID]
[2017-12-21 13:05:44,885][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalFieldList] Parameters: [@param0=[ID,74], @param1=[ApprovalListID,36]]
[2017-12-21 13:05:44,886][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalFieldList] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32]]
[2017-12-21 13:05:44,941][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "56251872" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:44,969][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "56251872" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:44,969][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalProcessList] PreparedStatement : [select a.*,b.`Name` AccName from sp_approvalprocess a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0         Order by Deepth;]
[2017-12-21 13:05:44,970][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalProcessList] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:05:44,970][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalProcessList] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:05:45,023][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "4878312" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:45,053][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "4878312" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:45,053][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalTransferListList] PreparedStatement : [select a.*,b.`Name` AccName from sp_approvaltransfer a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0 ;]
[2017-12-21 13:05:45,054][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalTransferListList] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:05:45,054][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalTransferListList] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:05:45,107][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "37710717" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:05:45,134][thdId:11]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "37710717" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:50,221][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.DomSqlMapBuilder][ParseGlobalProperties]-- Add property "useStatementNamespaces" value "false"
[2017-12-21 13:07:50,296][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [_getSystemTime] Prepared SQL: [select now();]
[2017-12-21 13:07:50,308][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [selectStationByAccessId] Prepared SQL: [select        h_station.*        from        h_station        where h_station.AccessKeyId= @param0         limit 1]
[2017-12-21 13:07:50,314][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTemplet] Prepared SQL: [SELECT        a.*,(SELECT `Name` from h_station_account where Account_ID=a.AddPersion) as AddPersonName        FROM        sp_approvaltype a        where a.System_Station_ID= @param0  and a.IsDelete=0 and a.Enditable=1        order by  a.Enditable desc]
[2017-12-21 13:07:50,315][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetSelectApproval] Prepared SQL: [SELECT a.*,t.`Name` as Title,s.`Name` as AddPersonName,c.ShowName,v.`Value`,c.FieldType from sp_approvallist a        LEFT join sp_approvaltype t on a.ApprovalType_ID=t.ID        LEFT JOIN h_station_account s on a.AddPerson=s.Account_ID        LEFT JOIN h_customfield c on a.ApprovalType_ID=SUBSTRING(c.BusType,10)        LEFT JOIN h_customfield_value v on c.FieldName=v.FieldName        where a.ID= @param0]
[2017-12-21 13:07:50,319][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalField] Prepared SQL: [SELECT ID,Name,DataSource,FieldType from h_customfield  where BusType= @param0  and FieldType in(103,104,105,106,110) and PID=0 and System_Station_ID= @param1]
[2017-12-21 13:07:50,320][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetAllAcoount] Prepared SQL: [SELECT        t.Account_ID,        t.System_Station_ID,        t.`Name`,        s.Phone,        s.CardNumber,        t.AddTime,        t.Valid,        t.IsAdministrator,        t.Stationproxy_ID,        z.LoginTime,        z.LoginCount,        y.Departments        FROM        h_station_account AS t        LEFT JOIN        (SELECT Account_ID,MAX(LoginTime) LoginTime,COUNT(Account_ID) LoginCount        FROM h_station_account_logindetail GROUP BY Account_ID ORDER BY Account_ID ASC  ) z ON t.Account_ID=z.Account_ID        LEFT JOIN (        SELECT        n.Account_ID,        GROUP_CONCAT(n.Department_ID, ':', n.IsManager) AS Departments        FROM        (SELECT Account_ID,Department_ID,IsMain,IsManager FROM h_station_account_department ORDER BY IsMain desc) n        GROUP BY n.Account_ID        ) y ON t.Account_ID=y.Account_ID        LEFT JOIN h_account s ON t.AccountID=s.ID        WHERE 1=1  AND t.IsDelete=0 and t.System_Station_ID= @param0]
[2017-12-21 13:07:50,320][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetInitiateApplicationList] Prepared SQL: [SELECT * FROM sp_approvaltype        WHERE ID IN (        SELECT ApprovalType_ID FROM sp_approvalvisrange WHERE AccID =  @param0         OR FIND_IN_SET(DeptID,(SELECT group_concat(getParentList (Department_ID)) FROM h_station_account_department WHERE Account_ID =  @param0  AND System_Station_ID =  @param1 ))        )        AND System_Station_ID =  @param1  AND IsDelete = 0 AND Enditable = 1]
[2017-12-21 13:07:50,321][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCustomfield] Prepared SQL: [SELECT * from h_customfield where BusType= @param0  and IsDelete=0 order by SortID]
[2017-12-21 13:07:50,321][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApplicationCondition] Prepared SQL: [SELECT *,AccIds as AccId,DeptIds as DeptId from sp_approvalcondition where ApprovalType_ID= @param0  order by Priority]
[2017-12-21 13:07:50,322][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetDepartment] Prepared SQL: [select a.*,b.Name as AccountName from h_station_account_department a left join h_station_account b on b.Account_ID = a.Account_ID where a.System_Station_ID =  @param0 ;]
[2017-12-21 13:07:50,322][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionObject] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_conditionapproveobject a left join h_station_account b on b.Account_ID = a.AccId order by a.ApprovalCondition_ID,a.Priority]
[2017-12-21 13:07:50,323][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalConditionCC] Prepared SQL: [SELECT a.*,b.Name as AccName from sp_approvalcc a left join h_station_account b on b.Account_ID = a.AccId]
[2017-12-21 13:07:50,323][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetUpDeparts] Prepared SQL: [select getParentList(Department_ID) FROM h_station_account_department where Account_ID =  @param0  and IsMain = 1 and System_Station_ID =  @param1 ;]
[2017-12-21 13:07:50,324][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalInfoModel] Prepared SQL: [SELECT  a.ApprovalType_ID as ID, concat(s.`Name`,'的',t.`Name`) as Title,ApprovalStatus        FROM sp_approvallist a        LEFT JOIN sp_approvaltype t ON a.ApprovalType_ID = t.ID        LEFT JOIN h_station_account s ON a.AddPerson = s.Account_ID        WHERE a.ID = @param0]
[2017-12-21 13:07:50,324][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalFieldList] Prepared SQL: [SELECT a.ID FieldID,a.PID,a.`Name` ShowName,b.`Value` ShowValue  from h_customfield a        join h_customfield_value b on a.FieldName = b.FieldName        where a.BusType = concat('approval_', @param0 ) and b.BusType = 100 and b.BusID =  @param1         order by a.SortID]
[2017-12-21 13:07:50,324][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalProcessList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvalprocess a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0         Order by Deepth;]
[2017-12-21 13:07:50,325][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalTransferListList] Prepared SQL: [select a.*,b.`Name` AccName from sp_approvaltransfer a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0 ;]
[2017-12-21 13:07:50,325][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovalprocessModel] Prepared SQL: [SELECT a.ID,a.ApprovalList_ID,a.CounterSign,a.Deepth,a.ApprovalTransfer_ID,        (case when b.AccID > 0 then b.AccID else a.AccID end) as AccID,        (case when b.AccID > 0 then b.Remark else a.Remark end) as Remark,        (case when b.AccID > 0 then b.operationTime else a.operationTime end) as operationTime,        (case when b.AccID > 0 then b.operationStatus else a.operationStatus end) as operationStatus        from sp_approvalprocess a        left join sp_approvaltransfer b on a.approvalTransfer_ID = b.ID        where a.approvallist_id= @param0  and a.Deepth= @param1]
[2017-12-21 13:07:50,326][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetApprovaltransferModel] Prepared SQL: [SELECT * from Sp_Approvaltransfer where approvallist_id= @param0]
[2017-12-21 13:07:50,326][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [GetProcessTransferModel] Prepared SQL: [SELECT a.AccID,b.AccID AccID1 from sp_approvalprocess a left join  sp_approvaltransfer b on a.ApprovalTransfer_ID = b.ID        where a.ApprovalList_ID =  @param0  and a.Deepth =  @param1]
[2017-12-21 13:07:50,327][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [EnditableApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set Enditable =  @param0  where ID =  @param1 ;]
[2017-12-21 13:07:50,327][thdId:1]-[DEBUG]-[IBatisNet.DataMapper.Configuration.Statements.PreparedStatementFactory][Prepare]-- Statement Id: [DeleteApprovalTemplet] Prepared SQL: [update Sp_Approvaltype set IsDelete = 1 where ID =  @param0 ;]
[2017-12-21 13:07:52,029][thdId:6]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuting]-- url=http://localhost:63795/Process/GetSelectApproval?ApprovalListID=36
[2017-12-21 13:07:52,033][thdId:6]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuting]-- [ApprovalListID=36]
[2017-12-21 13:07:53,818][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalInfoModel] PreparedStatement : [SELECT  a.ApprovalType_ID as ID, concat(s.`Name`,'的',t.`Name`) as Title,ApprovalStatus        FROM sp_approvallist a        LEFT JOIN sp_approvaltype t ON a.ApprovalType_ID = t.ID        LEFT JOIN h_station_account s ON a.AddPerson = s.Account_ID        WHERE a.ID = @param0]
[2017-12-21 13:07:53,836][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalInfoModel] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:07:53,837][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalInfoModel] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:07:54,148][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "49578303" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:54,199][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "49578303" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:54,200][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalFieldList] PreparedStatement : [SELECT a.ID FieldID,a.PID,a.`Name` ShowName,b.`Value` ShowValue  from h_customfield a        join h_customfield_value b on a.FieldName = b.FieldName        where a.BusType = concat('approval_', @param0 ) and b.BusType = 100 and b.BusID =  @param1         order by a.SortID]
[2017-12-21 13:07:54,201][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalFieldList] Parameters: [@param0=[ID,74], @param1=[ApprovalListID,36]]
[2017-12-21 13:07:54,202][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalFieldList] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32]]
[2017-12-21 13:07:54,259][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "64836814" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:54,291][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "64836814" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:54,293][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalProcessList] PreparedStatement : [select a.*,b.`Name` AccName from sp_approvalprocess a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0         Order by Deepth;]
[2017-12-21 13:07:54,293][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalProcessList] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:07:54,294][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalProcessList] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:07:54,349][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "1219419" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:54,411][thdId:6]-[ERROR]-[IBatisNet.DataMapper.MappedStatements.ReaderAutoMapper][Build]-- The column [ApprovalList_ID] could not be auto mapped to a property on [ApprovalProject.Model.ViewModel.ApprovalProcessModel]
[2017-12-21 13:07:54,414][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "1219419" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:54,415][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][Create]-- Statement Id: [GetApprovalTransferListList] PreparedStatement : [select a.*,b.`Name` AccName from sp_approvaltransfer a        LEFT JOIN h_station_account b on b.Account_ID=a.AccID where a.ApprovalList_ID =  @param0 ;]
[2017-12-21 13:07:54,415][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalTransferListList] Parameters: [@param0=[ApprovalListID,36]]
[2017-12-21 13:07:54,416][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.Commands.DefaultPreparedCommand][ApplyParameterMap]-- Statement Id: [GetApprovalTransferListList] Types: [@param0=[Int32, System.Int32]]
[2017-12-21 13:07:54,468][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][OpenConnection]-- Open Connection "35363151" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:54,495][thdId:6]-[DEBUG]-[IBatisNet.DataMapper.SqlMapSession][CloseConnection]-- Close Connection "35363151" to "MySQL, MySQL provider V6.9.9.0".
[2017-12-21 13:07:54,638][thdId:6]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuted]-- requestId=
[2017-12-21 13:07:54,639][thdId:6]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuted]-- controllerName=Process
[2017-12-21 13:07:54,640][thdId:6]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuted]-- actionName=GetSelectApproval
[2017-12-21 13:07:54,640][thdId:6]-[DEBUG]-[CommonFramework.Mvc.Filter.RequestLoggerFilter][OnActionExecuted]-- returnData={"RequestId":null,"Message":"操作成功","SuccessResponse":true,"Data":{"ApModel":{"ID":74,"Title":"倪海涛的请假","ApprovalStatus":3},"FieldShow":[{"FieldID":1190,"PID":0,"ShowName":"请假类型","ShowValue":"喜假","Details":[]},{"FieldID":1191,"PID":0,"ShowName":"请假开始时间","ShowValue":"2017-12-20","Details":[]},{"FieldID":1192,"PID":0,"ShowName":"请假结束时间","ShowValue":"2017-12-20","Details":[]},{"FieldID":1193,"PID":0,"ShowName":"请假事由","ShowValue":"","Details":[]}],"ProcessList":[{"ID":26,"CounterSign":0,"OperationStatus":3,"OperationTime":"2017/12/20 19:35:23","Deepth":1,"AccID":96,"AccName":"黄翠菊","Remark":"123","ApprovalTransfer_ID":0,"AccountList":[{"State":1,"Remark":"123","OperationTime":"2017/12/20 19:35:23","AccountID":96,"AccountName":"黄翠菊","Transfer_AccountID":0,"Transfer_AccountName":null,"Transfer_OperationTime":null,"Transfer_Remark":null},{"State":0,"Remark":null,"OperationTime":"2017/12/20 19:25:51","AccountID":150,"AccountName":"彭玉蓉","Transfer_AccountID":0,"Transfer_AccountName":null,"Transfer_OperationTime":null,"Transfer_Remark":null}]},{"ID":28,"CounterSign":2,"OperationStatus":0,"OperationTime":"2017/12/20 19:25:51","Deepth":2,"AccID":138,"AccName":"倪海涛","Remark":null,"ApprovalTransfer_ID":0,"AccountList":[{"State":0,"Remark":"","OperationTime":"2017/12/20 19:25:51","AccountID":138,"AccountName":"倪海涛","Transfer_AccountID":0,"Transfer_AccountName":null,"Transfer_OperationTime":null,"Transfer_Remark":null}]}]},"TotalCount":null}
